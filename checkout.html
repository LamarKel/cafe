<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout - Atalia Café</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="menu.css" />

  <style>
    :root{
      --green:#6B7F5A;
      --coffee:#6B4A3A;
      --cream:#F6F1EB;
      --dark:#2E2E2E;
      --white:#FFFFFF;
      --radius:16px;
      --shadow: 0 10px 30px rgba(0,0,0,.12);
    }

    body{ margin:0; background: var(--cream); color: var(--dark); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a{ color:inherit; text-decoration:none; }

    .page{ max-width: 1100px; margin: 0 auto; padding: 22px 16px; }

    .top{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:12px; margin-bottom: 14px;
    }
    .title{ margin:0; font-size: 28px; font-weight: 900; color: var(--coffee); }
    .muted{ opacity:.78; font-size: 14px; margin: 6px 0 0; }

    .btn{
      border:0;
      border-radius: 14px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 900;
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      transition: transform .12s ease, filter .2s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(.98); }
    .btn-primary{ background: var(--green); color: var(--white); box-shadow: var(--shadow); }
    .btn-ghost{ background: rgba(107,127,90,.12); color: var(--dark); }

    .layout{
      display:grid;
      grid-template-columns: 1.35fr .95fr;
      gap: 16px;
      align-items:start;
    }

    .card{
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card-h{
      padding: 16px;
      border-bottom: 1px solid rgba(0,0,0,.06);
      display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    .card-h h2{ margin:0; font-size: 16px; }
    .card-b{ padding: 16px; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .field{ display:flex; flex-direction:column; gap:8px; }
    label{ font-size: 13px; font-weight: 800; opacity:.9; }
    input, textarea, select{
      border: 1px solid rgba(0,0,0,.12);
      border-radius: 14px;
      padding: 12px 12px;
      font-size: 14px;
      outline: none;
      background: #fff;
    }
    textarea{ min-height: 92px; resize: vertical; }

    input:focus, textarea:focus, select:focus{
      border-color: rgba(107,127,90,.65);
      box-shadow: 0 0 0 4px rgba(107,127,90,.15);
    }

    .segmented{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .chip{
      flex:1;
      min-width: 160px;
      border: 1px solid rgba(0,0,0,.12);
      border-radius: 14px;
      padding: 12px 12px;
      cursor:pointer;
      display:flex; gap:10px; align-items:flex-start;
      background: #fff;
      transition: transform .12s ease, border-color .2s ease;
    }
    .chip:active{ transform: scale(.99); }
    .chip strong{ display:block; }
    .chip small{ display:block; opacity:.75; margin-top:2px; }
    .chip.active{
      border-color: rgba(107,127,90,.85);
      box-shadow: 0 0 0 4px rgba(107,127,90,.15);
    }

    .items{ display:flex; flex-direction:column; gap: 10px; }
    .item{
      display:grid;
      grid-template-columns: 58px 1fr auto;
      gap: 10px;
      align-items:center;
      padding: 10px;
      border-radius: 14px;
      background: rgba(0,0,0,.03);
    }
    .thumb{
      width: 58px; height: 58px;
      border-radius: 14px;
      overflow:hidden;
      background: rgba(0,0,0,.05);
    }
    .thumb img{ width:100%; height:100%; object-fit: cover; display:block; }
    .iname{ margin:0; font-weight: 900; font-size: 14px; }
    .imeta{ margin:2px 0 0; font-size: 12px; opacity:.78; }
    .iprice{ font-weight: 900; color: var(--coffee); }

    .sum{ display:flex; flex-direction:column; gap: 10px; }
    .row{ display:flex; justify-content:space-between; gap: 10px; }
    .total{
      margin-top: 6px;
      padding-top: 10px;
      border-top: 1px solid rgba(0,0,0,.08);
      font-weight: 900;
      font-size: 18px;
      color: var(--coffee);
    }

    .bar{
      margin-top: 12px;
      display:flex; gap: 10px; flex-wrap:wrap;
    }
    .bar .btn{ flex:1; min-width: 220px; }

    .notice{
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      background: rgba(107,74,58,.08);
      border: 1px solid rgba(107,74,58,.15);
      font-size: 13px;
    }

    @media (max-width: 920px){
      .layout{ grid-template-columns: 1fr; }
      .grid{ grid-template-columns: 1fr; }
      .chip{ min-width: 0; }
    }
  </style>
</head>

<body>
  <main class="page">
    <div class="top">
      <div>
        <h1 class="title">Checkout</h1>
        <p class="muted" id="storeLabel">Cargando tienda…</p>
      </div>
      <a class="btn btn-ghost" href="cart.html">← Volver al carrito</a>
    </div>

    <div class="layout">
      <!-- FORM -->
      <section class="card">
        <div class="card-h">
          <h2>Datos del pedido</h2>
          <span class="muted" id="itemsCount">0 items</span>
        </div>

        <div class="card-b">
          <div class="field" style="margin-bottom:12px;">
            <label>Tipo de pedido</label>
            <div class="segmented" id="orderType">
              <button type="button" class="chip active" data-type="pickup">
                <div>
                  <strong>Recoger en tienda</strong>
                  <small>Más rápido, sin delivery.</small>
                </div>
              </button>
              <button type="button" class="chip" data-type="delivery">
                <div>
                  <strong>Delivery</strong>
                  <small>Indica dirección y referencia.</small>
                </div>
              </button>
            </div>
          </div>

          <div class="grid">
            <div class="field">
              <label>Nombre</label>
              <input id="name" type="text" placeholder="Ej. Kelvin" autocomplete="name" />
            </div>

            <div class="field">
              <label>Teléfono</label>
              <input id="phone" type="tel" placeholder="Ej. 8091234567" autocomplete="tel" />
            </div>

            <div class="field" id="addressField" style="display:none;">
              <label>Dirección</label>
              <input id="address" type="text" placeholder="Calle, número, sector" />
            </div>

            <div class="field" id="referenceField" style="display:none;">
              <label>Referencia</label>
              <input id="reference" type="text" placeholder="Ej. frente al colmado…" />
            </div>

            <div class="field" style="grid-column: 1 / -1;">
              <label>Nota para el pedido</label>
              <textarea id="note" placeholder="Ej. sin azúcar, extra caliente, etc."></textarea>
            </div>

            <div class="field" style="grid-column: 1 / -1;">
              <label>Método de pago</label>
              <select id="payment">
                <option value="cash">Efectivo</option>
                <option value="card">Tarjeta</option>
                <option value="transfer">Transferencia</option>
              </select>
            </div>
          </div>

          <div class="notice" id="validationMsg" style="display:none;"></div>

          <div class="bar">
            <button class="btn btn-primary" id="confirmBtn">Confirmar pedido</button>
            <button class="btn btn-ghost" id="whatsBtn">Confirmar por WhatsApp</button>
          </div>
        </div>
      </section>

      <!-- SUMMARY -->
      <aside class="card">
        <div class="card-h">
          <h2>Resumen</h2>
          <span class="muted" id="miniTotal">RD$ 0</span>
        </div>

        <div class="card-b">
          <div class="items" id="summaryItems"></div>

          <div class="sum" style="margin-top:12px;">
            <div class="row"><span class="muted">Subtotal</span><strong id="subtotal">RD$ 0</strong></div>
            <div class="row"><span class="muted">ITBIS</span><strong id="tax">RD$ 0</strong></div>
            <div class="row"><span class="muted">Envío</span><strong id="shipping">RD$ 0</strong></div>
            <div class="row total"><span>Total</span><span id="total">RD$ 0</span></div>
          </div>

          <div class="notice" style="margin-top:12px;">
            *Este checkout es frontend. Luego lo conectamos con backend o WhatsApp para pedidos reales.
          </div>
        </div>
      </aside>
    </div>
  </main>

  <script src="js/checkout.js"></script>
</body>
</html>
